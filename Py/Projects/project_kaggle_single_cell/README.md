## Проект открытые проблемы - одноклеточный анализ (Kaggle competitions)

в рамках обучения профессии Data Science от SkillFactory

## Предсказание реакции клеток на возмущения малых молекул лекарств:

* [Короткое решение (на submit)]()
* [Развернутое решение (на площадку skillFactory)]()

***

## Проблема:

Человеческая биология может быть сложной, отчасти из-за функции и взаимодействия приблизительно **37 триллионов** клеток тела, которые организованы в ткани, органы и системы. 

Однако последние достижения в одноклеточных технологиях позволили получить беспрецедентное представление о функции клеток и тканей на уровне ДНК, РНК и белков. 

Тем не менее, использование одноклеточных методов для разработки лекарственных средств требует **картирования причинно-следственных связей** между химическими возмущениями и последующим воздействием на состояние клеток. 

Эти эксперименты являются дорогостоящими и трудоемкими, и не все клетки и ткани поддаются высокопроизводительному транскриптомическому скринингу.

Для прогнозирования возмущений лекарственных средств было разработано несколько методов, большинство из которых являются вариациями архитектуры автокодирования (Dr.VAE, scGEN и ChemCPA). Однако этим методам не хватает надлежащих эталонных наборов данных с различными типами ячеек для определения того, насколько хорошо они обобщаются. 

Хотя **невозможно** измерить все возмущения во всех клетках, мы предполагаем, что **можно измерить подмножество** комбинаций и вывести остальное. Сегодня мы далеки от этой цели, но мы надеемся, что это соревнование послужит важным доказательством концепции.

## Ипользуемая метрика

Mean Rowwise Root Mean Squared Error: $MRRMSE = \displaystyle \frac{1}{R} \sum_{i=1}^{R} \Big( {\frac{1}{n} \sum_{j=1}^{n} (y_{ij} - \hat{y_{ij}})^2} \bigg)^\frac{1}{2}$

где $R$ - количество набранных строк, $y_{ij}$ и $\hat y_{ij}$ реальное и предсказанное значение, соответственно, для строки $i$, столбца $j$, и $n$ - число столбцов.

## Критерии оценки

1. Интеграция биологических знаний

2. Изучение проблемы

3. Конструкция модели (не следует затачивать модель на тестовый сет)

4. Надежность (как отреагирует модель на уменьшение тренровочных данных и/или добавление шума к данным)

5. Стиль документации и кода

6. Воспроизводимость

***

## Обзор данных

**`de_train.parquet`** - Агрегированные данные дифференциального выражения в плотном формате массива:

* гены `A1BG`, `A1BG-AS1`, ..., `ZZEF1` (всего 18211) - значение дифференциального выражения $(-log10(p-value)*sign(LFC))$ для каждого гена.

* `cell_type` - аннотированный клеточный тип для каждой клетки на основе РНК-выражения

* `sm_name` - основное имя (родительского) соединения (в стандартизированном представлении), выбранного `LINCS`. Это сделано для того, чтобы сопоставить данные, полученные в ходе этого эксперимента, с данными карты подключения [LINCS](https://lincsportal.ccs.miami.edu/datasets/view/LDS-1611).

* `sm_lincs_id` - Глобальное `LINCS ID` (родительское, в стандартизированном представлении). Это сделано для того, чтобы сопоставить данные, полученные в ходе этого эксперимента, с данными карты подключения [LINCS](https://lincsportal.ccs.miami.edu/datasets/view/LDS-1611).

* `SMILES` - упрощенная молекулярно-входная система ввода [SMILES](https://en.wikipedia.org/wiki/Simplified_molecular-input_line-entry_system) представлений соединений, используемых в эксперименте. Это 1D представление молекулярной структуры. Эти `SMILES` предоставляются `Cellarity` на основе специфических соединений, заказанных для этого эксперимента.

* `control` - логический флаг, указывающий, использовался ли этот экземпляр в качестве элемента управления.

>Файл `de_train.parquet` содержит основные данные проект. Он содержит значения для ряда пар `cell_type / sm_name`.
>
>Примечание: нет данных `DE` для образца `DMSO`, потому что это отрицательный контроль. Все данные `DE` рассчитан по отношению к `DMSO`, т.е. анализ `DE` спрашивает "насколько я уверен, что каждый ген увеличенный или уменьшенный относится к `DMSO` в сложной обработке".

**`adata_train.parquet`**


### Техническая цель: 
>Предсказать соответствующие значения для пар `cell_type / sm_name`, заданных в `id_map.csv`.

## Submission file

Для каждого `id` в тестовом сете необходимо предсказать значение для каждого из `18211` генов, представленных в отдельных столбцах. Каждый `id` соответствует паре `cell_type / sm_name`, которые находятся в файле `id_map.csv`.

